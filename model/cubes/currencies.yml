cubes:
  - name: currencies
    sql_table: gpc_data_2026_01_26.currencies
    title: Currencies
    description: Currency reference data with exchange rates for multi-currency support

    measures:
      - name: currency_count
        type: count
        description: Total number of currencies

    dimensions:
      - name: currency_id
        sql: "{CUBE}.currency_id"
        type: number
        primary_key: true
        description: Unique identifier for the currency

      - name: currency_name
        sql: "{CUBE}.currency_name"
        type: string
        description: Currency name (EUR, GBP, USD, etc.)

      - name: currency_symbol
        sql: "{CUBE}.currency_symbol"
        type: string
        description: Currency symbol

      - name: is_base_currency
        sql: "{CUBE}.is_base_currency"
        type: boolean
        description: Indicates if this is the base currency for the organization

      - name: is_inactive
        sql: "{CUBE}.is_inactive"
        type: boolean
        description: Indicates if the currency is inactive

    segments:
      - name: active_currencies
        sql: "{CUBE}.is_inactive = false"
        description: "Active currencies only"

      - name: base_currency
        sql: "{CUBE}.is_base_currency = true"
        description: "The organization's base currency"

    pre_aggregations:
      - name: currency_analysis
        measures:
          - currency_count
        dimensions:
          - currency_name
        refresh_key:
          every: 1 day
